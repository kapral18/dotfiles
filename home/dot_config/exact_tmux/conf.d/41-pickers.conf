# Picker popups + picker-specific options.

# URL picker (bindings)
bind-key u run-shell -b "$HOME/.config/tmux/scripts/pick_url.sh"

# URL picker (options)
set -g @pick_url_popup 'center,60%,35%'

# Session picker (bindings)
bind-key T run-shell -b "$HOME/.config/tmux/scripts/pick_session_popup.sh"

# Session picker (options)
set -g @pick_session_popup_width '60'
# set -g @pick_session_pre_refresh 'on'  # optional: run cache update before fzf (default off for snappy popup)
set -g @pick_session_dir_exclude '.git,.git/*,.git/**,.cache,.cache/*,.cache/**,.bazel-cache,.bazel-cache/*,.bazel-cache/**,.amp,.amp/*,.amp/**,.bag,.bag/*,.bag/**,Library,Library/*,Library/**,.gradle,.gradle/*,.gradle/**,.npm,.npm/*,.npm/**,.pnpm-store,.pnpm-store/*,.pnpm-store/**,node_modules,bazel-*,dist,build,out,target,__pycache__,.pytest_cache,.mypy_cache,.ruff_cache,.tox,.venv,venv,.terraform,.terragrunt-cache'

# Finish setup for sessions created in bulk mode (placeholder panes) when you
# actually enter them (spawn shell + 2-pane layout).
set-hook -g client-session-changed "run-shell -b \"$HOME/.config/tmux/scripts/pick_session_on_session_switch.sh '#{session_name}'\""

# Keep the picker cache correct when sessions are created/renamed outside the picker.
set-hook -g after-new-session "run-shell -b \"$HOME/.config/tmux/scripts/pick_session_index_update.sh --force --quiet --quick-only\""
set-hook -g after-rename-session "run-shell -b \"$HOME/.config/tmux/scripts/pick_session_index_update.sh --force --quiet --quick-only\""
