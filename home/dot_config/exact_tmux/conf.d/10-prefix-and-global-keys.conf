# Prefix + global key behavior (core, not feature-specific tools).

# Ctrl + Space as prefix
unbind C-b
unbind C-Space
set-option -g prefix C-Space
bind C-Space send-prefix

# Window loop
bind-key C-p previous-window
bind-key C-n next-window

# Pass through C-S-<hjkl> so terminal apps (Neovim) receive CSI-u sequences.
bind-key -n C-S-h send-keys "\033[104;6u"
bind-key -n C-S-j send-keys "\033[106;6u"
bind-key -n C-S-k send-keys "\033[107;6u"
bind-key -n C-S-l send-keys "\033[108;6u"

# Swap key-table entrypoint
bind-key s switch-client -T k18

# <prefix>sh / <prefix>sl to swap panes left/right
bind-key -T k18 h swap-pane -d -t -1
bind-key -T k18 l swap-pane -d -t +1

# <prefix>sH / <prefix>sL to swap windows left/right
bind-key -T k18 H swap-window -d -t -1
bind-key -T k18 L swap-window -d -t +1

# No confirm to kill pane/window
bind-key & kill-window
bind-key x kill-pane

# Shift-F style zoom toggle on `f`
unbind-key z
unbind-key f
bind-key f resize-pane -Z

# Reload config
bind-key R source-file $HOME/.config/tmux/tmux.conf \; display-message "Sourced tmux config!"

# Run command palette popup
bind-key r display-popup -E ",tmux-run-all '*' '' 'exec fish'"
